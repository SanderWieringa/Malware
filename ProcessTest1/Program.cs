using System;
using System.Collections.Generic;
using System.Diagnostics;

namespace ProcessTest1
{
    internal class Program
    {
        private static void Main()
        {
            var runningProcesses = Process.GetProcesses();
            var isVm = false;
            var vmProcesses = new List<string>
            {
                "vmware-wmx",
                "VboxService",
                "VboxTray",
                "vm3dservice",
                "VMwareService",
                "VMwareTray",
                "VMwareUser"
            };

            foreach (Process process in runningProcesses)
            {
                Console.WriteLine(process.ProcessName);
                if (!vmProcesses.Contains(process.ProcessName)) continue;
                isVm = true;
                break;
            }

            Console.WriteLine("======================================================================================");
            Console.WriteLine(isVm ? "Host is a virtual machine" : "Host is not a virtual machine");
        }
    }
}
