using System;
using System.Collections.Generic;
using System.Diagnostics;

namespace ProcessTest1
{
    class Program
    {
        static void Main(string[] args)
        {
            Process[] list = Process.GetProcesses();
            List<string> vmProcesses = new List<string>();
            vmProcesses.Add("vmware-wmx");
            vmProcesses.Add("VboxService");
            vmProcesses.Add("VboxTray");
            vmProcesses.Add("vm3dservice");
            vmProcesses.Add("VMwareService");
            vmProcesses.Add("VMwareTray");
            vmProcesses.Add("VMwareUser");
            vmProcesses.Add("");
            vmProcesses.Add("");
            vmProcesses.Add("");
            bool isVM = false;
            foreach (var item in list)
            {
                Console.WriteLine(item.ProcessName);
                if (vmProcesses.Contains(item.ProcessName))
                {
                    isVM = true;
                    break;
                }
            }

            Console.WriteLine("======================================================================================");
            Console.WriteLine(isVM ? "Host is a virtual machine" : "Host is not a virtual machine");
        }
    }
}
